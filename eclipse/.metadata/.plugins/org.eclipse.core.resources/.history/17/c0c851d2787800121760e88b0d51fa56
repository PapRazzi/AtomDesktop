package me.atom.windowsj;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;

public class FTPAtomUploader {

	
	void UploadIntoFTP() {

    }

    static void doUpload(String uuid) {

          // This is exact location of the file in the local server/machine
          // Source Location of the file
          File fileSource = new File("C:/Program Files/Atom/UserData/" + uuid + ".flac");

          // this is the file name only; not the lcoation
          String fileName = fileSource.getName();

          // Username and password to enter in to the ftp server
          String userName = "atom";
          String password = "guigui1205";

          // this is the ftpserver details upto the folder in which file needs to
          // be uploaded
          String ftpServer = "ftp.alwaysdata.com";


          // Constructing the string buffer
          StringBuffer sb = new StringBuffer("ftp://");
          // check for authentication else assume its anonymous access.

          sb.append(userName);
          sb.append(':');
          sb.append(password);
          sb.append('@');

          sb.append(ftpServer);
          sb.append("/www/guzzoni/audio/");
          sb.append(fileName);

          /*
           * UPloading mode type ==> a=ASCII mode, i=image (binary) mode, d= file
           * directory listing
           */
          sb.append(";type=i");


          BufferedInputStream bis = null;
          BufferedOutputStream bos = null;
          try {

                URL url = new URL(sb.toString());
                URLConnection urlc = url.openConnection();
                bos = new BufferedOutputStream(urlc.getOutputStream());
                bis = new BufferedInputStream(new FileInputStream(fileSource));

                int i;

                // read byte by byte until end of stream
                while ((i = bis.read()) != -1) {
                      bos.write(i);
                }
                //JOptionPane.showMessageDialog(null, fileName + " is uploaded","Press OK", JOptionPane.INFORMATION_MESSAGE);
                /**System.out.println("Bitch, successfuly uploaded :)");**/
                //XMLUtility.verifyIfExists(uuid);
          } catch (Exception e) {
                e.printStackTrace();
          } finally {

                if (bis != null)
                      try {
                            bis.close();
                      } catch (IOException ioe) {
                            ioe.printStackTrace();
                            System.out.println("IO exception after if bis " + ioe);
                      }
                if (bos != null)
                      try {
                            bos.close();
                      } catch (IOException ioe) {
                            ioe.printStackTrace();
                            System.out.println("IO exception after if " + ioe);
                      }
          }
    }
}